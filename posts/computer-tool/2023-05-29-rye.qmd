---
title: "RYE" 
description: 아마도 가장 편리한 Python 가상 환경 
author: "JS HUHH"
date: "05/29/2023"
image: "https://d1k571r5p7i4n1.cloudfront.net/c.1391/large/essential_tools_for_home_repair.JPG"
categories: [computer-tool]
filters:
   - lightbox
lightbox: auto
#jupyter: python3
draft: false
---

## TL; DR

Rye를 이용해 편리하게 가상 환경을 구축해보자. 

## 어딘가 모자란 Python 가상환경 

파이썬 용 가상 환경은 어딘가 하나씩 아쉽다. Venv, virtualenv, conda 등 다양한 선택지가 있지만 마음 놓고 생각 없이 편리하게 쓸 수 있는 툴이 없다. 그나마 conda가 가장 편리해서 사용하고 있지만, 쓰다보면 의존성 관리 등의 대목이 아쉽다. 각주에서 보듯이 conda에서는 환경이 꼬이기 쉽다, 그리고 이 상태가 되면 수습도 어렵다.  

대안으로 pyenv 등의 가상 환경과 [poetry](https://python-poetry.org/) 같은 의존성 관리 도구를 함께 부릴 수 있겠다. 이 경우 의존성 관리의 이점이 있다. 하지만 이 녀석들을 다루는 것이 그리 쉽지는 않고, 활용헐 수 있는 OS 역시 제한적이다. conda 정도의 편리함을 주면서 동시에 패키지 의존성 관리가 가능한 도구는 없을까? 

Rye가 이 문제에 관해 거의 완벽한 해결책이다. Rye는 파이썬 버전에서 패키지의 의존성 관리까지 편리하게 지원한다. 프로젝트와 가상 환경이 함께 따라 다니기 때문에 환경 자체를 별도로 관리해야 하는 conda 보다 단정하다. 

유일한 단점이라면 이 프로젝트가 극히 초기라는 것인데, 이 정도의 사용성이라면 빠르게 자리를 잡지 않을까 싶다. 

[https://rye-up.com](https://rye-up.com)

:::{.column-margin}
[여기](https://velog.io/@snoop2head/no-more-conda-please-pyenv-poetry-please) 내용을 참고하자. 
:::

## 설치 및 Rye 관리  

OS에 맞춰 Rye를 설치해주자. 윈도의 경우는 아직 `winget`을 통한 설치는 아직 지원되지 않고, macos에서는 `brew`를 통해 설치할 수 있다. 

:::{.column-margin}
[설치](https://rye-up.com/guide/installation/) 항목을 참고하자. 
:::

업데이트와 삭제는 아래와 같다. 

```shell
> rye self update # 업데이트 
> rye self uninstall # 삭제 
```

## 프로젝트 개시 및 패키지 설치 

프로젝트를 생성할 상위 폴더에서 아래와 같이 생성 명령어를 실행한다. 

```shell
> rye init {프로젝트-이름}
```

만일 이미 폴더가 만들어져 있다면 해당 폴더 안에서 `rye init`을 실행하면 된다. 이제 프로젝트의 폴더에 들어가서 설치하려는 패키지를 `add`하고 `sync`로 이를 설치한다. `ipykernel` 패키지는 VS Code 등에서 `.ipynb` 파일을 불러와 작업하고자 할 때 필요한 패키지다. 

```shell
> rye add ipykernel pandas 
> rye sync 
```

가상 환경의 개별 설정은 `project.toml` 파일을 통해서 관리된다. 자세한 것은 [공식 문서](https://rye-up.com/guide/pyproject/)를 참고하자. 

## VS Code에서 `.ipynb` 작업하기 

프로젝트 폴더와 연동해서 VS Code를 열어주자. 터미널에서 `code .`을 실행하면 된다. 


![VS Code 커널 선택 (클릭하면 확대)](./images/vscode_rye.png){width=70%}

스크린 샷을 참고하자. `커널 선택` > `다른 커널 선택` > `Python 환경` > `.venv...`를 택하면 된다. 해당 프로젝트 폴더 아래 `.venv` 폴더 안에 있는 파이썬 환경을 가져오게 되고, 해당 프로젝트의 실행 환경이 VS Code와 연결된다. 

